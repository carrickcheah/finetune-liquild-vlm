seed: 23
use_wandb: true

# Model configuration
model_name: LiquidAI/LFM2-VL-3B
max_seq_length: 2048
checkpoint_path: null

# Dataset configuration
dataset_name: carrick113/cifar100
dataset_samples: 50000  # Use 50000 training samples
dataset_image_column: img
dataset_label_colum: fine_label
dataset_splits: ["train"]
train_split_ratio: 0.9  # 90% train, 10% validation

# CIFAR-100 label mapping (integer index to class name)
label_mapping:
  0: apple
  1: aquarium_fish
  2: baby
  3: bear
  4: beaver
  5: bed
  6: bee
  7: beetle
  8: bicycle
  9: bottle
  10: bowl
  11: boy
  12: bridge
  13: bus
  14: butterfly
  15: camel
  16: can
  17: castle
  18: caterpillar
  19: cattle
  20: chair
  21: chimpanzee
  22: clock
  23: cloud
  24: cockroach
  25: couch
  26: crab
  27: crocodile
  28: cup
  29: dinosaur
  30: dolphin
  31: elephant
  32: flatfish
  33: forest
  34: fox
  35: girl
  36: hamster
  37: house
  38: kangaroo
  39: keyboard
  40: lamp
  41: lawn_mower
  42: leopard
  43: lion
  44: lizard
  45: lobster
  46: man
  47: maple_tree
  48: motorcycle
  49: mountain
  50: mouse
  51: mushroom
  52: oak_tree
  53: orange
  54: orchid
  55: otter
  56: palm_tree
  57: pear
  58: pickup_truck
  59: pine_tree
  60: plain
  61: plate
  62: poppy
  63: porcupine
  64: possum
  65: rabbit
  66: raccoon
  67: ray
  68: road
  69: rocket
  70: rose
  71: sea
  72: seal
  73: shark
  74: shrew
  75: skunk
  76: skyscraper
  77: snail
  78: snake
  79: spider
  80: squirrel
  81: streetcar
  82: sunflower
  83: sweet_pepper
  84: table
  85: tank
  86: telephone
  87: television
  88: tiger
  89: tractor
  90: train
  91: trout
  92: tulip
  93: turtle
  94: wardrobe
  95: whale
  96: willow_tree
  97: wolf
  98: woman
  99: worm

preprocessing_workers: 4

system_prompt: |
  You are an expert computer vision model specializing in object classification.

  Respond with precision and confidence. Provide only the exact class name from the allowed list.

  This is an image classification task using the CIFAR-100 dataset, which contains 32x32 pixel color images across 100 diverse object categories including animals, vehicles, household items, and natural scenes.

  Your task is to identify the primary object in the given image and classify it into exactly one of the following 100 classes:

  - apple
  - aquarium_fish
  - baby
  - bear
  - beaver
  - bed
  - bee
  - beetle
  - bicycle
  - bottle
  - bowl
  - boy
  - bridge
  - bus
  - butterfly
  - camel
  - can
  - castle
  - caterpillar
  - cattle
  - chair
  - chimpanzee
  - clock
  - cloud
  - cockroach
  - couch
  - crab
  - crocodile
  - cup
  - dinosaur
  - dolphin
  - elephant
  - flatfish
  - forest
  - fox
  - girl
  - hamster
  - house
  - kangaroo
  - keyboard
  - lamp
  - lawn_mower
  - leopard
  - lion
  - lizard
  - lobster
  - man
  - maple_tree
  - motorcycle
  - mountain
  - mouse
  - mushroom
  - oak_tree
  - orange
  - orchid
  - otter
  - palm_tree
  - pear
  - pickup_truck
  - pine_tree
  - plain
  - plate
  - poppy
  - porcupine
  - possum
  - rabbit
  - raccoon
  - ray
  - road
  - rocket
  - rose
  - sea
  - seal
  - shark
  - shrew
  - skunk
  - skyscraper
  - snail
  - snake
  - spider
  - squirrel
  - streetcar
  - sunflower
  - sweet_pepper
  - table
  - tank
  - telephone
  - television
  - tiger
  - tractor
  - train
  - trout
  - tulip
  - turtle
  - wardrobe
  - whale
  - willow_tree
  - wolf
  - woman
  - worm

  Rules:
  1. You MUST choose exactly one class from the list above
  2. Use the exact spelling and format as shown (lowercase with underscores)
  3. If multiple objects are present, identify the most prominent one
  4. Focus on the primary subject of the image

  Respond with only the class name. Do not include explanations, confidence scores, or additional text.

user_prompt: |
  What object do you see in this image?

# LoRA-specific hyperparameters
use_peft: true
lora_r: 16
lora_alpha: 32
lora_dropout: 0.05
lora_bias: none
use_rslora: false

# General training hyperparameters
learning_rate: 2e-4
num_train_epochs: 3
batch_size: 4
gradient_accumulation_steps: 4
optim: adamw_8bit
warmup_ratio: 0.1
weight_decay: 0.01
logging_steps: 10
eval_steps: 1000

# Weights and Biases configuration
wandb_entity: carrick1131
wandb_project_name: cifar100-classification
wandb_experiment_name: null
skip_eval: false
output_dir: outputs

# Modal configuration
modal_app_name: cifar100-finetune
